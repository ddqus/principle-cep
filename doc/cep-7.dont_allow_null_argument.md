# CEP 7 - 인자의 값으로 NULL을 절대 혀용하지 마세요

### Header

* Reference
    * 엘레강트 오브젝트 3.3, 120p
* Status: Draft

### 규약

* 인자가 NULL 인 경우를 대비한 코드를 작성하지 않는다.
  * 단순하거나 필요하다고 인정될 경우에는 첫번째 방법인 NULL 체크 -> 예외 발생은 허용한다.

### 정리

```
public Iterable<File> find(String mask){
  // 디렉토리르 탐ㅅ핵해서 "*.txt"와 같은 형식의
  // 마스크(mask)에 일치하는 모든 파일을 찾는다.
  // 마스크가 NULL인 경우에는 모든 파일을 반환한다.
  
  if(mask == null){
    // 모든 파일을 찾는다
  } else {
    // 마스크를 사용해서 파일을 찾는다
  }
}
```

* NULL을 사용하는 편이 편리하고 경제적인 접근방법인 것처럼 보입니다.
  * 하지만 각각의 객체가 **자신의 행동을 온전히 책임진다**는 OOP와는 상반되는 아이디업니디ㅏ.
* 문제가 되는 부분은 mask == null 입니다.
  * mask 객체에게 이야기하는 대신 피하고 **무시합니다**.
  * 객체의 면전에 대고 "당신과 이야기 나눌 가치가 있나요?" 라고 묻는 것입니다.
  * 심지어 객체에게 직접 이야기하지도 않습니다.

```
public Iterable<File> find(Mask mask){
  if(mask.empty()){
    // 모든 파일을 찾는다
  } else {
    // 마스크를 사용해서 파일을 찾는다
  }
}
```

```
public Iterable<File> find(Mask mask){
  Collection<File> files = new LinkedList<>();
  for(File file: /* 모든 파일 */){
    if(mask.matches(file)){
      files.add(file);
    }
  }
}
```

* (file 이 empty 인지 여부를 find 가 책임지는 것이 아니라 Mask-대상 객체-가 책임진다)

* 인자의 값으로 NULL 을 허용하면 mask == null 과 같은 비교문을 사용할 수 밖에 없습니다.
  * 그외에는 NULL인지 여부를 판단할 수 있는 방법이 없습니다.
  * NULL 여부를 체크함으로써 **객체가 맡아야 하는 상당량의 책임**을 빼앗게 됩니다.
  * 외부에서 자신의 데이터를 다뤄주기만을 기대하고 스스로를 책임질 수 없는 **멍청한 자료구조로 객체를 퇴화**시키고 있습니다.
* 여러분이 전달한 인자가 객체인지 NULL인지를 확인하는 짐을 메소드 구현자에게 떠넘겨서는 안됩니다.
* NULL 을 사용하지 말자고 결정하였는데 클라이언트가 여전히 NULL 을 전달한다면 어떻게 해야 할까요?
  * 첫번째 방법은, NULL 을 체크한 후 예외를 던집니다.
  * 두번째 방법은, 선호하는 방법으로 NULL 을 무시하는 것입니다.
    * 인자가 절대 NULL 이 아니라고 가정하고 어떤 대비도 하지 않습니다.
    * 메서드를 실행하는 도중 NullPointerException 이 던져지고 **메서도 호출자는 자신이 실수했다는 사실**을 인지하게 될 것입니다.
* 인자에 절대로 NULL 을 허용하지 마세요. 절대로 예외는 없습니다.